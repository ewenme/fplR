---
output: github_document
---

```{r, include = FALSE}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>", fig.path = "man/figures/README-", out.width = "75%")
```

# fplr <img src="man/figures/logo.png" alt="" width="120" align="right" />

[![Build Status](https://travis-ci.org/ewenme/fplr.png)](https://travis-ci.org/ewenme/fplr) 
[![lifecycle](https://img.shields.io/badge/lifecycle-experimental-orange.svg)](https://www.tidyverse.org/lifecycle/#experimental)

## Overview

fplr makes it quick 'n' easy to retrieve [Fantasy Premier League](https://fantasy.premierleague.com) (FPL) data programmatically, then work with it, all from R. 

## Installation

Get the latest development version of `fplr` from GitHub.

```{r, eval=FALSE}
# install.packages("devtools")
devtools::install_github("ewenme/fplr")
```

Because of the lack of dev support from FPL and possible API changes, the package is unlikely to be submitted to CRAN and will remain in an experimental [lifecycle](https://www.tidyverse.org/lifecycle/) for the foreseeable future.

## Usage

Refer to the [quickstart guide](https://ewenme.github.io/fplr/articles/fplr-quickstart.html) to get started. 
Still, here are some very basic examples of the functionality and practical applications of `fplr`.

### Get data

...on all players in the current FPL season.

```{r}
library(fplr)

players <- fpl_get_player_all()

players
```

...on a user's FPL season performances.

```{r}
user_performance <- fpl_get_user_season(user_id = 123)

user_performance
```

### Get some insight

Now, manipulate and visualise this data, in conjunction with [dplyr](https://dplyr.tidyverse.org/) and [ggplot2](https://ggplot2.tidyverse.org/) respectively.

For example, peek at points-per-90 vs player costs...

```{r, message=FALSE, warning=FALSE}
library(dplyr)
library(ggplot2)

players_filtered <- players %>% 
  # remove players without many minutes
  filter(minutes >= 900, !is.na(minutes)) %>% 
  # calc some metrics
  mutate(points_per_90 = (total_points / minutes) * 90)
  
# scatter plot of points per minute vs cost
ggplot(data = players_filtered, aes(x = points_per_90, y = now_cost)) +
  geom_jitter() +
  geom_text(
    aes(label = web_name), nudge_y = -0.2, size = 3,
    data = filter(players_filtered, points_per_90 >= quantile(points_per_90, 0.95) | now_cost >= quantile(now_cost, 0.95))
    )
```

...or track your personal performance over the years.

```{r}
# rank by season
ggplot(data = user_performance, aes(x = season_name, y = rank, group = 1)) +
  geom_line() +
  # reverse the y-axis
  scale_y_reverse()
```

## In-the-wild

- [...xPoints?](https://ewen.io/2019/03/08/xpoints/)

```{r, echo=FALSE}
knitr::include_graphics("https://github.com/rbind/ewenme/raw/master/static/blog/2019-03-08-xPoints_files/figure-html/value-calc-1.png")
```

- [FPL Mythbusting with fplr](https://ewen.io/2017/06/25/fpl-mythbusting-with-fplr/)

```{r, echo=FALSE}
knitr::include_graphics("https://github.com/rbind/ewenme/raw/master/static/blog/2017-06-25-fpl-mythbusting-with-fplr_files/figure-html/bandwagons-1.png")
```

## Collaborators

If you want to contribute to the package, try and follow:

- Principles in Hadley Wickham's [R packages book](https://r-pkgs.org/)
- The GitHub fork/pull request [model](https://guides.github.com/introduction/flow/)

Please note that this project is released with a [Contributor Code of Conduct](CODE_OF_CONDUCT.md). By participating in this project you agree to abide by its terms.
